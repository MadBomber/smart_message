<svg width="900" height="700" xmlns="http://www.w3.org/2000/svg" style="background: transparent;">
  <defs>
    <style>
      .title { font: bold 18px sans-serif; fill: #e1e5e9; text-anchor: middle; }
      .label { font: 14px sans-serif; fill: #c9d1d9; text-anchor: middle; }
      .small-label { font: 11px sans-serif; fill: #8b949e; text-anchor: middle; }
      .code-label { font: 10px monospace; fill: #f0f6fc; }
      .service-name { font: 12px sans-serif; fill: #f0f6fc; text-anchor: middle; font-weight: bold; }
      .api-gateway-box { fill: #0d1117; stroke: #f85149; stroke-width: 2; rx: 8; }
      .web-service-box { fill: #0d1117; stroke: #56d364; stroke-width: 2; rx: 8; }
      .db-service-box { fill: #0d1117; stroke: #a5a5ff; stroke-width: 2; rx: 8; }
      .payment-service-box { fill: #0d1117; stroke: #ffa657; stroke-width: 2; rx: 8; }
      .monitoring-box { fill: #161b22; stroke: #8b949e; stroke-width: 2; rx: 8; }
      .message-flow { stroke: #58a6ff; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .pattern-flow { stroke: #a5a5ff; stroke-width: 2; fill: none; marker-end: url(#arrowhead-purple); stroke-dasharray: 3,3; }
      .alert-flow { stroke: #f85149; stroke-width: 2; fill: none; marker-end: url(#arrowhead-red); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#58a6ff" />
    </marker>
    <marker id="arrowhead-purple" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#a5a5ff" />
    </marker>
    <marker id="arrowhead-red" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#f85149" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="450" y="30" class="title">Redis Enhanced Transport: Microservices Routing</text>
  
  <!-- API Gateway (Central Hub) -->
  <rect x="350" y="80" width="200" height="80" class="api-gateway-box"/>
  <text x="450" y="110" class="service-name">API Gateway</text>
  <text x="450" y="130" class="small-label">Routes all incoming requests</text>
  <text x="450" y="145" class="code-label">Publishes: *.api_gateway.*</text>
  
  <!-- Web Service -->
  <rect x="100" y="200" width="150" height="60" class="web-service-box"/>
  <text x="175" y="225" class="service-name">Web Service</text>
  <text x="175" y="245" class="code-label">Pattern: *.*.web_service</text>
  
  <!-- User Service -->
  <rect x="300" y="200" width="150" height="60" class="web-service-box"/>
  <text x="375" y="225" class="service-name">User Service</text>
  <text x="375" y="245" class="code-label">Pattern: *.*.user_service</text>
  
  <!-- Order Service -->
  <rect x="500" y="200" width="150" height="60" class="web-service-box"/>
  <text x="575" y="225" class="service-name">Order Service</text>
  <text x="575" y="245" class="code-label">Pattern: *.*.order_service</text>
  
  <!-- Database Layer -->
  <rect x="650" y="320" width="150" height="60" class="db-service-box"/>
  <text x="725" y="345" class="service-name">Database Layer</text>
  <text x="725" y="365" class="code-label">Pattern: *.*.database</text>
  
  <!-- Payment Gateway -->
  <rect x="100" y="320" width="150" height="60" class="payment-service-box"/>
  <text x="175" y="345" class="service-name">Payment Service</text>
  <text x="175" y="365" class="code-label">Pattern: *.payment.*</text>
  
  <!-- Monitoring & Logging -->
  <rect x="350" y="440" width="200" height="60" class="monitoring-box"/>
  <text x="450" y="465" class="service-name">Monitoring Service</text>
  <text x="450" y="485" class="code-label">Pattern: alertmessage.*.*</text>
  
  <!-- Message Flows from API Gateway -->
  <line x1="400" y1="160" x2="175" y2="200" class="message-flow"/>
  <text x="280" y="175" class="code-label">usermessage.api_gateway.web_service</text>
  
  <line x1="430" y1="160" x2="375" y2="200" class="message-flow"/>
  <text x="410" y="175" class="code-label">authmessage.api_gateway.user_service</text>
  
  <line x1="480" y1="160" x2="575" y2="200" class="message-flow"/>
  <text x="540" y="175" class="code-label">ordermessage.api_gateway.order_service</text>
  
  <!-- Internal Service Communications -->
  <line x1="450" y1="260" x2="725" y2="320" class="pattern-flow"/>
  <text x="590" y="290" class="code-label">querymessage.user_service.database</text>
  
  <line x1="575" y1="260" x2="725" y2="320" class="pattern-flow"/>
  <text x="650" y="305" class="code-label">ordersavemessage.order_service.database</text>
  
  <line x1="375" y1="260" x2="175" y2="320" class="pattern-flow"/>
  <text x="260" y="285" class="code-label">paymentmessage.user_service.payment</text>
  
  <!-- Alert/Monitoring Flows -->
  <line x1="175" y1="380" x2="400" y2="440" class="alert-flow"/>
  <text x="240" y="415" class="code-label">alertmessage.payment.monitoring</text>
  
  <line x1="725" y1="380" x2="500" y2="440" class="alert-flow"/>
  <text x="620" y="415" class="code-label">alertmessage.database.monitoring</text>
  
  <!-- Routing Patterns Legend -->
  <rect x="50" y="520" width="800" height="160" class="api-gateway-box"/>
  <text x="450" y="545" class="label">Common Routing Patterns</text>
  
  <!-- Pattern Examples -->
  <text x="100" y="570" class="service-name">Service-to-Service Communication:</text>
  <text x="100" y="590" class="code-label">transport.where.from('api_gateway').to('user_service').subscribe</text>
  <text x="100" y="605" class="small-label"># Receives: *.api_gateway.user_service</text>
  
  <text x="100" y="630" class="service-name">Cross-Service Message Types:</text>
  <text x="100" y="650" class="code-label">transport.where.type('PaymentMessage').subscribe</text>
  <text x="100" y="665" class="small-label"># Receives: paymentmessage.*.*</text>
  
  <text x="500" y="570" class="service-name">Alert Aggregation:</text>
  <text x="500" y="590" class="code-label">transport.where.type('AlertMessage').to('monitoring').subscribe</text>
  <text x="500" y="605" class="small-label"># Receives: alertmessage.*.monitoring</text>
  
  <text x="500" y="630" class="service-name">Service Health Monitoring:</text>
  <text x="500" y="650" class="code-label">transport.where.from('database').type('HealthMessage').subscribe</text>
  <text x="500" y="665" class="small-label"># Receives: healthmessage.database.*</text>
</svg>