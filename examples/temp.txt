=== SmartMessage Example: Point-to-Point Order Processing ===

🚀 Starting Order Processing Demo
🏪 OrderService: Starting up...
💳 PaymentService: Starting up...

============================================================
Processing Sample Orders
============================================================

--- Order 1 ---

🏪 OrderService: Creating order ORD-1001
🏪 OrderService: Sending order to payment processing...

===================================================
== SmartMessage Published via STDOUT Transport
== Single-Tier Serialization:
== Message Class: OrderMessage
== Serialized Message: {"_sm_header":{"uuid":"d9a7f410-b902-4a67-9e22-694d3bf01b5f","message_class":"OrderMessage","published_at":"2025-08-20 12:02:21 -0500","publisher_pid":50033,"version":1,"from":"OrderService","serializer":"SmartMessage::Serializer::Json"},"_sm_payload":{"order_id":"ORD-1001","customer_id":"CUST-001","amount":99.99,"currency":"USD","payment_method":"credit_card","items":["Widget A","Widget B"]}}
===================================================

💳 PaymentService: Starting up...
💳 PaymentService: Processing payment for order ORD-1001
💳 PaymentService: Sending payment response...

===================================================
== SmartMessage Published via STDOUT Transport
== Single-Tier Serialization:
== Message Class: PaymentResponseMessage
== Serialized Message: {"_sm_header":{"uuid":"ca09a331-d5b9-4250-ab4c-542a1b1db9c7","message_class":"PaymentResponseMessage","published_at":"2025-08-20 12:02:21 -0500","publisher_pid":50033,"version":1,"from":"PaymentService","serializer":"SmartMessage::Serializer::Json"},"_sm_payload":{"order_id":"ORD-1001","payment_id":"PAY-5001","status":"success","message":"Payment processed successfully","processed_at":"2025-08-20T12:02:21-05:00"}}
===================================================

✅ Payment success: Order ORD-1001 - Payment processed successfully

--- Order 2 ---

🏪 OrderService: Creating order ORD-1002
🏪 OrderService: Sending order to payment processing...

===================================================
== SmartMessage Published via STDOUT Transport
== Single-Tier Serialization:
== Message Class: OrderMessage
== Serialized Message: {"_sm_header":{"uuid":"85ee7a93-ad19-48b3-9366-b6ed6dbb9e0e","message_class":"OrderMessage","published_at":"2025-08-20 12:02:22 -0500","publisher_pid":50033,"version":1,"from":"OrderService","serializer":"SmartMessage::Serializer::Json"},"_sm_payload":{"order_id":"ORD-1002","customer_id":"CUST-002","amount":1299.99,"currency":"USD","payment_method":"debit_card","items":["Premium Widget","Extended Warranty"]}}
===================================================

💳 PaymentService: Starting up...
💳 PaymentService: Processing payment for order ORD-1002
💳 PaymentService: Sending payment response...

===================================================
== SmartMessage Published via STDOUT Transport
== Single-Tier Serialization:
== Message Class: PaymentResponseMessage
== Serialized Message: {"_sm_header":{"uuid":"773c1dc9-5ee2-4866-a5d0-95701f436250","message_class":"PaymentResponseMessage","published_at":"2025-08-20 12:02:22 -0500","publisher_pid":50033,"version":1,"from":"PaymentService","serializer":"SmartMessage::Serializer::Json"},"_sm_payload":{"order_id":"ORD-1002","payment_id":"PAY-5001","status":"failed","message":"Insufficient funds","processed_at":"2025-08-20T12:02:22-05:00"}}
===================================================

❌ Payment failed: Order ORD-1002 - Insufficient funds

--- Order 3 ---

🏪 OrderService: Creating order ORD-1003
🏪 OrderService: Sending order to payment processing...

===================================================
== SmartMessage Published via STDOUT Transport
== Single-Tier Serialization:
== Message Class: OrderMessage
== Serialized Message: {"_sm_header":{"uuid":"5b3cb763-8c3e-470f-b6f9-dd5e0929f926","message_class":"OrderMessage","published_at":"2025-08-20 12:02:22 -0500","publisher_pid":50033,"version":1,"from":"OrderService","serializer":"SmartMessage::Serializer::Json"},"_sm_payload":{"order_id":"ORD-1003","customer_id":"CUST-003","amount":45.5,"currency":"USD","payment_method":"paypal","items":["Small Widget"]}}
===================================================

💳 PaymentService: Starting up...
💳 PaymentService: Processing payment for order ORD-1003
💳 PaymentService: Sending payment response...

===================================================
== SmartMessage Published via STDOUT Transport
== Single-Tier Serialization:
== Message Class: PaymentResponseMessage
== Serialized Message: {"_sm_header":{"uuid":"dc35ea12-28a5-4926-854a-d2cc52f6c91b","message_class":"PaymentResponseMessage","published_at":"2025-08-20 12:02:22 -0500","publisher_pid":50033,"version":1,"from":"PaymentService","serializer":"SmartMessage::Serializer::Json"},"_sm_payload":{"order_id":"ORD-1003","payment_id":"PAY-5001","status":"success","message":"Payment processed successfully","processed_at":"2025-08-20T12:02:22-05:00"}}
===================================================

✅ Payment success: Order ORD-1003 - Payment processed successfully

⏳ Waiting for all payments to process...

✨ Demo completed!

This example demonstrated:
• Point-to-point messaging between OrderService and PaymentService
• Bidirectional communication with request/response pattern
• JSON serialization of complex message data
• STDOUT transport with loopback for local demonstration
