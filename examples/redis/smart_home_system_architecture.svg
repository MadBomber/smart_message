<?xml version="1.0" encoding="UTF-8"?>
<svg width="900" height="700" viewBox="0 0 900 700" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .bg { fill: transparent; }
      .thermostat { fill: #4a2a1a; stroke: #ff6b6b; stroke-width: 2; rx: 8; }
      .camera { fill: #1a3a3a; stroke: #4ecdc4; stroke-width: 2; rx: 8; }
      .lock { fill: #3a3a1a; stroke: #ffe66d; stroke-width: 2; rx: 8; }
      .dashboard { fill: #2a3a2a; stroke: #a8e6cf; stroke-width: 2; rx: 8; }
      .redis-group { fill: #2a1a1a; stroke: #dc143c; stroke-width: 3; rx: 12; }
      .channel { fill: #1a1a2a; stroke: #dc143c; stroke-width: 2; rx: 6; }
      .publish-flow { stroke: #ffaa4a; stroke-width: 2; fill: none; stroke-dasharray: 5,5; }
      .subscribe-flow { stroke: #4aff4a; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .text { fill: #ffffff; font-family: 'Arial', sans-serif; font-size: 12px; }
      .title { fill: #4a9eff; font-family: 'Arial', sans-serif; font-size: 18px; font-weight: bold; }
      .subtitle { fill: #ffaa4a; font-family: 'Arial', sans-serif; font-size: 11px; }
      .channel-text { fill: #dc143c; font-family: 'Arial', sans-serif; font-size: 10px; }
      .device-label { fill: #ffffff; font-family: 'Arial', sans-serif; font-size: 10px; }
    </style>
    <marker id="arrowhead" markerWidth="8" markerHeight="6" 
            refX="8" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#4aff4a" />
    </marker>
  </defs>
  
  <!-- Background -->
  <rect class="bg" width="900" height="700"/>
  
  <!-- Title -->
  <text x="450" y="25" text-anchor="middle" class="title">Smart Home IoT System Architecture</text>
  <text x="450" y="45" text-anchor="middle" class="subtitle">Redis Pub/Sub Channels for Device Communication</text>
  
  <!-- IoT Devices -->
  <rect x="50" y="100" width="140" height="80" class="thermostat"/>
  <text x="120" y="125" text-anchor="middle" class="text">üå°Ô∏è Smart Thermostat</text>
  <text x="120" y="145" text-anchor="middle" class="device-label">THERM-001</text>
  <text x="120" y="160" text-anchor="middle" class="device-label">Living Room</text>
  
  <rect x="50" y="220" width="140" height="80" class="camera"/>
  <text x="120" y="245" text-anchor="middle" class="text">üìπ Security Camera</text>
  <text x="120" y="265" text-anchor="middle" class="device-label">CAM-001</text>
  <text x="120" y="280" text-anchor="middle" class="device-label">Front Door</text>
  
  <rect x="50" y="340" width="140" height="80" class="lock"/>
  <text x="120" y="365" text-anchor="middle" class="text">üö™ Smart Door Lock</text>
  <text x="120" y="385" text-anchor="middle" class="device-label">LOCK-001</text>
  <text x="120" y="400" text-anchor="middle" class="device-label">Main Entrance</text>
  
  <rect x="710" y="220" width="140" height="80" class="dashboard"/>
  <text x="780" y="245" text-anchor="middle" class="text">üìä IoT Dashboard</text>
  <text x="780" y="265" text-anchor="middle" class="device-label">System Monitor</text>
  <text x="780" y="280" text-anchor="middle" class="device-label">Central Control</text>
  
  <!-- Redis Pub/Sub Channels -->
  <rect x="300" y="80" width="350" height="380" class="redis-group"/>
  <text x="475" y="105" text-anchor="middle" class="title">Redis Pub/Sub Channels</text>
  
  <!-- Individual channels -->
  <rect x="320" y="130" width="310" height="50" class="channel"/>
  <text x="475" y="150" text-anchor="middle" class="text">SensorDataMessage</text>
  <text x="475" y="170" text-anchor="middle" class="channel-text">Temperature, Motion, Status, Battery Levels</text>
  
  <rect x="320" y="200" width="310" height="50" class="channel"/>
  <text x="475" y="220" text-anchor="middle" class="text">DeviceCommandMessage</text>
  <text x="475" y="240" text-anchor="middle" class="channel-text">set_temperature, start_recording, lock/unlock, get_status</text>
  
  <rect x="320" y="270" width="310" height="50" class="channel"/>
  <text x="475" y="290" text-anchor="middle" class="text">AlertMessage</text>
  <text x="475" y="310" text-anchor="middle" class="channel-text">Motion Detected, Battery Low, High Temperature</text>
  
  <rect x="320" y="340" width="310" height="50" class="channel"/>
  <text x="475" y="360" text-anchor="middle" class="text">DashboardStatusMessage</text>
  <text x="475" y="380" text-anchor="middle" class="channel-text">System Status, Device Counts, Alert Summaries</text>
  
  <!-- Device Publishing (dashed lines to channels) -->
  <path d="M 190 140 L 320 155" class="publish-flow"/>
  <text x="255" y="135" class="subtitle">Temperature Data</text>
  
  <path d="M 190 260 L 320 155" class="publish-flow"/>
  <text x="255" y="208" class="subtitle">Motion Data</text>
  
  <path d="M 190 380 L 320 155" class="publish-flow"/>
  <text x="255" y="368" class="subtitle">Lock Status</text>
  
  <!-- Alert publishing -->
  <path d="M 190 280 L 320 295" class="publish-flow"/>
  <path d="M 190 160 L 320 295" class="publish-flow"/>
  <path d="M 190 400 L 320 295" class="publish-flow"/>
  
  <!-- Dashboard publishing -->
  <path d="M 710 240 L 630 365" class="publish-flow"/>
  <path d="M 710 260 L 630 225" class="publish-flow"/>
  
  <!-- Device subscribing (solid arrows from channels) -->
  <path d="M 630 225 L 710 140" class="subscribe-flow"/>
  <text x="670" y="182" class="subtitle">set_temperature</text>
  
  <path d="M 630 225 L 710 180" class="subscribe-flow"/>
  <text x="650" y="202" class="subtitle">start/stop recording</text>
  
  <path d="M 630 225 L 710 280" class="subscribe-flow"/>
  <text x="670" y="252" class="subtitle">lock/unlock</text>
  
  <!-- Dashboard subscribing to all data -->
  <path d="M 630 155 L 710 220" class="subscribe-flow"/>
  <path d="M 630 295 L 710 240" class="subscribe-flow"/>
  <path d="M 630 365 L 710 260" class="subscribe-flow"/>
  <path d="M 630 225 L 710 280" class="subscribe-flow"/>
  
  <!-- Channel Benefits -->
  <rect x="50" y="500" width="800" height="180" fill="#1a1a1a" stroke="#4a9eff" rx="8"/>
  <text x="70" y="525" class="title">Channel-Based Architecture Benefits</text>
  
  <text x="70" y="550" class="text">üéØ Efficient Message Routing:</text>
  <text x="90" y="565" class="subtitle">‚Ä¢ Each message type uses dedicated Redis channel</text>
  <text x="90" y="580" class="subtitle">‚Ä¢ Devices only process relevant messages (no unnecessary filtering)</text>
  <text x="90" y="595" class="subtitle">‚Ä¢ Automatic load balancing through Redis pub/sub mechanism</text>
  
  <text x="450" y="550" class="text">üîß Device-Specific Processing:</text>
  <text x="470" y="565" class="subtitle">‚Ä¢ THERM-* devices process temperature commands only</text>
  <text x="470" y="580" class="subtitle">‚Ä¢ CAM-* devices handle recording commands only</text>
  <text x="470" y="595" class="subtitle">‚Ä¢ LOCK-* devices respond to lock/unlock commands only</text>
  
  <text x="70" y="620" class="text">üìà Scalable Architecture:</text>
  <text x="90" y="635" class="subtitle">‚Ä¢ Easy to add new device types with new ID prefixes</text>
  <text x="90" y="650" class="subtitle">‚Ä¢ Multiple instances of same device type supported</text>
  <text x="90" y="665" class="subtitle">‚Ä¢ Dashboard aggregates all data for centralized monitoring</text>
  
  <text x="450" y="620" class="text">üîÑ Event-Driven Communication:</text>
  <text x="470" y="635" class="subtitle">‚Ä¢ Real-time sensor data publishing every 3-5 seconds</text>
  <text x="470" y="650" class="subtitle">‚Ä¢ Immediate alert generation on threshold conditions</text>
  <text x="470" y="665" class="subtitle">‚Ä¢ Bidirectional command and status flow</text>
</svg>